{"ast":null,"code":"import _slicedToArray from\"/Users/zhangcao/Desktop/OWL/ 3309 - Database /assignment4/3309-AutoGo-GIthub/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'bootstrap/dist/css/bootstrap.css';import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import Axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){//React hooks\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),currentUser=_useState2[0],setCurrentUser=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(\"Wrong username or password\"),_useState6=_slicedToArray(_useState5,2),authKey=_useState6[0],setAuthKey=_useState6[1];var API_DOMAIN=process.env.API_DOMAIN||'localhost';//For navigate between pages\nvar navigate=useNavigate();//Login function\nvar staffLogin=function staffLogin(){if(currentUser!==\"\"&&password!==\"\"){console.log(\"username\"+currentUser);console.log(\"password\"+password);// Using Axios to send post request to our backend\nAxios.post(\"http://\".concat(API_DOMAIN,\":8081/api/staff_login\"),{loginType:'staff',usr:currentUser,pwd:password}).then(function(response){setAuthKey(response.data);if(currentUser!==\"\"&&response.data!==\"\"){localStorage.setItem(\"currentUser\",currentUser);localStorage.setItem(\"password\",password);localStorage.setItem('position',response.data[0].position);console.log('staff login');if(response.data[0].position=='manager'){navigate('/staff-manager-home');}else{navigate('/staff-home');}window.location.reload();}else{alert(authKey);}});}};var guestLogin=function guestLogin(){if(currentUser!==\"\"&&password!==''){// Using Axios to send post request to our backend\nAxios.post(\"http://\".concat(API_DOMAIN,\":8081/api/guest_login\"),{loginType:'guest',usr:currentUser,pwd:password}).then(function(response){setAuthKey(response.data);if(currentUser!==\"\"&&response.data!==''){localStorage.setItem(\"currentUser\",currentUser);localStorage.setItem(\"password\",password);localStorage.setItem('clientNo',response.data[0].clientNo);navigate('/guest-home');window.location.reload();}else{alert(authKey);}});}};return/*#__PURE__*/_jsxs(\"div\",{class:\"row align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"col\",children:/*#__PURE__*/_jsx(\"div\",{className:\"staffLogin\",children:/*#__PURE__*/_jsxs(\"form\",{class:\"form-horizontal\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(event){setCurrentUser(event.target.value);},name:\"inputUserName\",type:\"text\",class:\"form-control\",id:\"inputUserNameStaff\",placeholder:\"User name\",required:true}),/*#__PURE__*/_jsx(\"label\",{for:\"inputUserName\",class:\"form-label\",children:\"User Name\"})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(event){setPassword(event.target.value);},name:\"inputPassword\",type:\"password\",class:\"form-control\",id:\"inputPasswordStaff\",placeholder:\"Password\",required:true}),/*#__PURE__*/_jsx(\"label\",{for:\"inputPassword\",class:\"form-label\",children:\"Password\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"position-relative\",children:/*#__PURE__*/_jsx(\"div\",{class:\"position-absolute top-0 \",children:/*#__PURE__*/_jsx(\"button\",{onClick:staffLogin,id:\"staff-login-btn\",class:\"btn btn-dark\",children:\"Log In As Staff\"})})})]})})}),/*#__PURE__*/_jsx(\"div\",{class:\"col\",children:/*#__PURE__*/_jsx(\"div\",{className:\"guestLogin\",children:/*#__PURE__*/_jsxs(\"form\",{class:\"form-horizontal\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(event){setCurrentUser(event.target.value);},name:\"inputUserName\",type:\"text\",class:\"form-control\",id:\"inputUserNameGuest\",placeholder:\"User name\",required:true}),/*#__PURE__*/_jsx(\"label\",{for:\"inputUserName\",class:\"form-label\",children:\"User Name\"})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(event){setPassword(event.target.value);},name:\"inputPassword\",type:\"password\",class:\"form-control\",id:\"inputPasswordGuest\",placeholder:\"Password\",required:true}),/*#__PURE__*/_jsx(\"label\",{for:\"inputPassword\",class:\"form-label\",children:\"Password\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"position-relative\",children:/*#__PURE__*/_jsx(\"div\",{class:\"position-absolute top-0 \",children:/*#__PURE__*/_jsx(\"button\",{onClick:guestLogin,id:\"guest-login-btn\",class:\"btn btn-dark\",children:\"Log In As Guest\"})})})]})})})]});}","map":{"version":3,"sources":["/Users/zhangcao/Desktop/OWL/ 3309 - Database /assignment4/3309-AutoGo-GIthub/src/components/login.js"],"names":["React","useState","useNavigate","Axios","Login","currentUser","setCurrentUser","password","setPassword","authKey","setAuthKey","API_DOMAIN","process","env","navigate","staffLogin","console","log","post","loginType","usr","pwd","then","response","data","localStorage","setItem","position","window","location","reload","alert","guestLogin","clientNo","event","target","value"],"mappings":"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","sourcesContent":["import 'bootstrap/dist/css/bootstrap.css';\nimport React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport Axios from 'axios';\n\nexport default function Login() {\n    //React hooks\n    const [currentUser, setCurrentUser] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [authKey, setAuthKey] = useState(\"Wrong username or password\");\n    const API_DOMAIN = process.env.API_DOMAIN || 'localhost';\n\n    //For navigate between pages\n    let navigate = useNavigate();\n\n    //Login function\n    const staffLogin = () => {\n        if (currentUser !== \"\" && password !== \"\") {\n            console.log(\"username\" + currentUser)\n            console.log(\"password\" + password)\n            // Using Axios to send post request to our backend\n            Axios.post(`http://${API_DOMAIN}:8081/api/staff_login`, {\n                loginType: 'staff',\n                usr: currentUser,\n                pwd: password\n            }).then(response => {\n                setAuthKey(response.data)\n                if (currentUser !== \"\" && response.data !== \"\") {\n                    localStorage.setItem(\"currentUser\", currentUser)\n                    localStorage.setItem(\"password\", password)\n                    localStorage.setItem('position', response.data[0].position)\n                    console.log('staff login')\n                    if (response.data[0].position == 'manager') {\n                        navigate('/staff-manager-home');\n                    }\n                    else {\n                        navigate('/staff-home');\n                    }\n                    window.location.reload();\n                } else {\n                    alert(authKey);\n                }\n            })\n        }\n    }\n\n    const guestLogin = () => {\n        if (currentUser !== \"\" && password !== '') {\n            // Using Axios to send post request to our backend\n            Axios.post(`http://${API_DOMAIN}:8081/api/guest_login`, {\n                loginType: 'guest',\n                usr: currentUser,\n                pwd: password\n            }).then(response => {\n                setAuthKey(response.data)\n                if (currentUser !== \"\" && response.data !== '') {\n                    localStorage.setItem(\"currentUser\", currentUser)\n                    localStorage.setItem(\"password\", password)\n                    localStorage.setItem('clientNo', response.data[0].clientNo)\n                    navigate('/guest-home')\n                    window.location.reload();\n                } else {\n                    alert(authKey);\n                }\n            })\n        }\n    }\n\n    return (\n        <div class=\"row align-items-center\">\n\n            <div class=\"col\">\n                <div className='staffLogin'>\n                    <form class=\"form-horizontal\" >\n                        <div class=\"form-floating mb-3\">\n                            <input onChange={(event) => { setCurrentUser(event.target.value) }} name=\"inputUserName\" type=\"text\" class=\"form-control\" id=\"inputUserNameStaff\"\n                                placeholder=\"User name\" required />\n                            <label for=\"inputUserName\" class=\"form-label\">User Name</label>\n                        </div>\n                        <div class=\"form-floating mb-3\">\n                            <input onChange={(event) => { setPassword(event.target.value) }} name=\"inputPassword\" type=\"password\" class=\"form-control\" id=\"inputPasswordStaff\"\n                                placeholder=\"Password\" required />\n                            <label for=\"inputPassword\" class=\"form-label\">Password</label>\n                        </div>\n                        <div class=\"position-relative\">\n                            <div class=\"position-absolute top-0 \">\n                                <button onClick={staffLogin} id='staff-login-btn' class=\"btn btn-dark\">Log In As Staff</button>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n            </div>\n\n            <div class=\"col\">\n                <div className='guestLogin'>\n                    <form class=\"form-horizontal\" >\n                        <div class=\"form-floating mb-3\">\n                            <input onChange={(event) => { setCurrentUser(event.target.value) }} name=\"inputUserName\" type=\"text\" class=\"form-control\" id=\"inputUserNameGuest\"\n                                placeholder=\"User name\" required />\n                            <label for=\"inputUserName\" class=\"form-label\">User Name</label>\n                        </div>\n                        <div class=\"form-floating mb-3\">\n                            <input onChange={(event) => { setPassword(event.target.value) }} name=\"inputPassword\" type=\"password\" class=\"form-control\" id=\"inputPasswordGuest\"\n                                placeholder=\"Password\" required />\n                            <label for=\"inputPassword\" class=\"form-label\">Password</label>\n                        </div>\n                        <div class=\"position-relative\">\n                            <div class=\"position-absolute top-0 \">\n                                <button onClick={guestLogin} id='guest-login-btn' class=\"btn btn-dark\">Log In As Guest</button>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n            </div>\n\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}